%% ------------------------------------------------------- %% 
%% ------------------------------------------------------- %%

\documentclass[10pt,a4paper]{report}

\usepackage{enumerate}
\usepackage{bsymb}
\usepackage{url} 
\usepackage[english]{babel}
\usepackage[top=3cm,bottom=2cm,left=2cm,right=2cm]{geometry}
%\usepackage[colorlinks=true,urlcolor=black,linkcolor=black,citecolor=black]{hyperref}
\usepackage{hyperref}
\usepackage{array}
\usepackage{amsmath}
\usepackage{graphicx}

\graphicspath{{./images/}}

%% ------------------------------------------------------- %%
\title{ANR-08-DEFI-005 \\ DECERT \\ ~ \\ Task 7: Integrating decision procedures into Rodin \\ ~ \\ D14: Preliminary report on integrating SMT proof witnesses into Rodin}
\author{Systerel}

%% ------------------------------------------------------- %%
\begin{document}
%% ----------------------------- %%
\maketitle

%% ----------------------------- %%
%% Preambule 
%% ----------------------------- %%
\begin{abstract}

The Rodin platform \cite{RODIN} mainly supports two kind of activities: modeling with the event-B notation and discharging the sequents generated from the models. 
Some sequents are typical mathematical lemmas, which are often encountered in practice, but are not yet well supported by proving tools such as those embedded in the Rodin platform.
The objective of the task 7 is to integrate SMT solvers to the Rodin proving framework to enhance its proving capability, especially in the field of arithmetics.

\end{abstract}

\tableofcontents

%% ----------------------------- %%
%% Introduction %%
%% ----------------------------- %%
\section{Introduction}
This document will first introduce RODIN and the Event-B platform in order to show how integration can be made with SMT solvers. Then we will expose the translation mechanism from an event-B expression to an SMT-Lib 1.2 and an SMT-Lib 2.0 expression. Benchmarks have been performed to compare solvers efficiency according to a sequent type, and a solver analysis will be introduced in this document.  

\paragraph{}
This integration raises several issues:
\begin{itemize}
\item A translation scheme from the event-B mathematical notation (i.e. set-theory and arithmetics) to the formalism(s) understood by the decision procedures needs to be defined. Of course, not all
concepts of the event-B mathematical language will be translatable, as it has the same expressive
power as higher-order logic.
\item A filtering mechanism is needed, so that decision procedures are attempted (either automatically or interactively) only in cases where they could be useful. This mechanism will have strong links with the translation, as it would be useless to launch the reasoner on an untranslatable lemma.
\item The Rodin prover insists that reasoners return a minimal set of needed hypotheses, in order to foster proof reuse. Fortunately, this information can be extracted from the decision procedure
traces or certificates, as one purpose of such artefacts is to memorize this information.
\end{itemize}

%% ----------------------------- %%
%% Body
%% ----------------------------- %%
\include{rodin}
\include{b2smt12}
\include{b2smt20}
\include{pluginex}

%% ----------------------------- %%
%% Conclusion %%
%% ----------------------------- %%
\section{Conclusion}

\paragraph{Future work.} 
The next steps planned are the following:
\begin{itemize}
\item Keep a link between hypotheses in Event-B format and those in SMT format. 
Such improvement will give the possibility to memorize for example, hypotheses needed to carry through a Rodin proof obligation. If an hypothesis changed, the proof obligation will not need to be done again, if the hypothesis is not among the needed ones. To achieve that, we will certainly have to use label on hypotheses introduced in SMT-Lib v2.0.
\item Get back counterexamples from SMT solvers (supporting SMT-LIB v2.0) to use them in 
Rodin.
\item Recommend an SMT solver to user in accordance to Proof Obligation type. Performances 
between solvers differ from one to another depending on the considered logic. It would be interesting to 
guide the user on a specific solver after a proof obligation analysis.  
\item Introduce an additional step before the final translation from FOL to SMT-LIB, 
which would be a simplification operation on FOL formulas. More precisely, there 
is no doubt that the $(0 >= 0) \wedge (0 <= x)$ formula can be easily simplified as 
$0 <= x$. Such simplifications are not considered in this document, and are only 
introduced here as topic of interest for further revisions.
\item Perform benchmarks on solvers in order to classify solvers (supported theories, SMT-lib supported version, performance according to chosen theories,...)

\end{itemize}

\paragraph{Acknowledgements.} 
The author thanks David D\'eharbe and V\'itor Alc\^antara de Almeida (Universidade Federal do Rio Grande do Norte, Natal, RN, Brazil), whose work on integrating SMT solvers in Rodin \cite{RODINSMT10} has provided a solid basis and has largely contributed to the contents of this deliverable.

%% ----------------------------- %%
%% Index and references
%% ----------------------------- %%
\nocite{*}
\bibliographystyle{plain}
\bibliography{biblio}

%% ----------------------------- %%
%% Index and references
%% ----------------------------- %%
\appendix
\makeatletter
\def\@seccntformat#1{Appendix~\csname the#1\endcsname:\quad}
\makeatother
\section{Benchmarking Procedure and Results}
\label{Bench}

     
\end{document}
